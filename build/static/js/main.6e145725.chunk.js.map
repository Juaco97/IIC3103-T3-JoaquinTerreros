{"version":3,"sources":["componentes/Socket.js","componentes/Chat.js","componentes/avion2.svg","componentes/Info.js","App.js","reportWebVitals.js","index.js"],"names":["socket","io","path","Chat","nombre","useState","mensaje","setMensaje","mensajes","setMensajes","useEffect","on","console","log","off","map","e","i","Date","date","toTimeString","split","name","message","onSubmit","preventDefault","emit","htmlFor","id","cols","rows","value","onChange","target","icono","Icon","iconUrl","imagen","iconSize","Info","vuelos","setVuelos","posiciones","setPosiciones","ultimaPosicion","setUltimaPosicion","prev","code","position","style","display","justifyContent","alignItems","height","MapContainer","className","center","zoom","maxZoom","TileLayer","url","attribution","vuelo","Polyline","positions","origin","destination","Marker","posicion","CircleMarker","lat","lng","fillColor","pathOptions","color","radius","Object","entries","codigo","icon","Popup","textAlign","airline","passengers","pasajero","listStyle","age","plane","seats","App","setNombre","registrado","setRegistrado","alert","resgitrado","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6e145725.chunk.js","sourcesContent":["import io from 'socket.io-client';\n\nconst socket = io(\"wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl\", {\n    path: '/flights'\n});\n\nexport default socket;","import React, { useState, useEffect } from 'react';\nimport socket from './Socket';\n\n\nconst Chat = ({ nombre }) => {\n    const [mensaje, setMensaje] = useState(\"\");\n    const [mensajes, setMensajes] = useState([]);\n   \n    useEffect(() => {\n        socket.on('CHAT', mensaje => {\n            console.log(mensaje);\n            setMensajes([...mensajes, mensaje]);\n        })\n        \n        return () => {socket.off()}\n    }, [mensajes])\n   \n    const enviar = (e) => {\n        e.preventDefault();\n        socket.emit(\"CHAT\", {name: nombre, message: mensaje});\n    }\n    \n    return (\n        <div>\n            <div>\n                {mensajes.map((e, i) => <div key={i}>{`[${new Date(e.date).toTimeString().split(' ')[0]}] ${e.name}: ${e.message}`}</div>)}\n            </div>\n            <form onSubmit={enviar}>\n                <label htmlFor=\"\">Escriba su mensaje</label>\n                <textarea name=\"\" id=\"\" cols=\"30\" rows=\"1\" value={mensaje} onChange={e => setMensaje(e.target.value)}>\n        \n                </textarea>\n                <button>Enviar</button>\n            </form>\n        </div>\n        \n        \n    )\n}\n\nexport default Chat;","export default __webpack_public_path__ + \"static/media/avion2.e01f0b9e.svg\";","import React, {useEffect, useState} from 'react';\nimport socket from './Socket';\nimport { MapContainer, TileLayer, Marker, Polyline, CircleMarker, Popup} from \"react-leaflet\";\nimport {Icon} from 'leaflet'\nimport imagen from './avion2.svg';\n\n\nconst icono = new Icon({\n  iconUrl: imagen,\n  iconSize: [50, 50]\n});\n\nconst Info = () => {\n      \n    // Hooks de estado para los vuelos y posiciones\n    const [vuelos, setVuelos] = useState([]);\n    const [posiciones, setPosiciones] = useState([]);\n    const [ultimaPosicion, setUltimaPosicion] = useState({});\n    \n    // Se consume los vuelos\n    useEffect(() => {\n      // Se gatilla el envio\n      socket.emit('FLIGHTS'); \n      // Se recibe el envio del mensaje\n      socket.on('FLIGHTS', mensaje => {\n        setVuelos(mensaje);\n      });\n    }, []);\n        \n    // Se consumen las posiciones\n    useEffect(() => {\n      socket.on('POSITION', mensaje => {\n        setPosiciones(prev => ([...prev, mensaje]));\n        setUltimaPosicion((prev) => ({...prev, [mensaje.code]: mensaje.position}));\n      })\n    }, []);\n    \n    console.log(posiciones);\n\n    \n  \n    return (\n      <div>\n        <div style={{display: 'flex',  justifyContent:'center', alignItems:'center', height: '100vh'}}>\n          <MapContainer\n            className=\"markercluster-map\"\n            center={[0, 0]}\n            zoom={2}\n            maxZoom={18}\n          >\n          <TileLayer\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n            attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          />\n          \n          {\n            vuelos.map(function(vuelo) {\n             \n              return (\n                <Polyline\n                positions={[ [vuelo.origin[0], vuelo.origin[1]], [vuelo.destination[0], vuelo.destination[1]] ]}\n                />\n              )\n            })\n          }\n          \n          {\n            vuelos.map(function(vuelo) {\n              return (\n                <Marker position={[vuelo.origin[0], vuelo.origin[1]]}/>\n              )\n            })\n          }\n          \n          {\n            vuelos.map(function(vuelo) {\n              return (\n                <Marker position={[vuelo.destination[0], vuelo.destination[1]]}/>\n              )\n            })\n          }\n          \n          {\n            posiciones.map(function(posicion) {\n             \n              return (\n                  <CircleMarker\n                      center={{lat:posicion.position[0], lng: posicion.position[1]}}\n                      fillColor=\"red\"\n                      pathOptions={{ color: 'red' }}\n                      radius={2}/>\n              )\n            })\n          }\n          \n          {\n            Object.entries(ultimaPosicion).map(([codigo, posicion]) => (\n              <Marker key={codigo}  icon={icono} position={[posicion[0], posicion[1]]}>\n                <Popup>{codigo}</Popup>\n              </Marker>\n              ))\n          }\n          </MapContainer>\n        </div>\n        <div className=\"\" style={{textAlign: \"left\"}}>\n          {\n            vuelos.map(function(vuelo) {\n              return (\n                <div>\n                  <h4>Codigo de vuelo: {vuelo.code}</h4>\n                  <ul>\n                    <li>Aerolinea: {vuelo.airline}</li>\n                    <li>Pasajeros en el vuelo:</li>\n                    {vuelo.passengers.map(function(pasajero) {\n                      return (\n                        <ol>\n                          <li style={{listStyle: \"square\"}}>Nombre: {pasajero.name}</li>\n                          <li style={{listStyle: \"square\"}}>Edad: {pasajero.age}</li>\n                          <br></br>\n                        </ol>\n                      )\n                    })}\n                    <li>Avion: {vuelo.plane}</li>\n                    <li>Asiento: {vuelo.seats}</li>\n                  </ul>\n                </div>\n              )\n            })\n          }\n        </div>\n      </div>\n    )\n};\n\nexport default Info;\n","import './App.css';\n\nimport React, {useState} from 'react';\nimport Chat from './componentes/Chat';\nimport Info from './componentes/Info';\n\nfunction App() {\n  const [nombre, setNombre] = useState(\"\");\n  const [registrado, setRegistrado] = useState(false);\n  \n  const registrar = (e) => {\n    e.preventDefault();\n    if (nombre !== \"\") {\n      setRegistrado(true);\n    } else {\n      alert(\"Debes ingresar un nickname para chatear!\");\n    }\n  }\n  \n  return (\n    <div className=\"App\">\n      <div className=\"Chat\">\n        <h1>Chat</h1>\n        {\n          !registrado &&\n          \n          <form onSubmit={registrar}>\n            <label htmlFor=\"\">Introduce un nickname</label>\n            <input value={nombre} onChange={e => setNombre(e.target.value)}/>\n            <button>Ir a la pagina!</button>\n          </form>\n        }\n        \n        {\n          registrado &&\n          <Chat nombre={nombre} resgitrado={registrado}/>\n        }\n      </div>\n      <Info/>\n    </div>\n  )\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}